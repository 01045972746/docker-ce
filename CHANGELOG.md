# Changelog

For more information on the list of deprecated flags and APIs, have a look at
https://docs.docker.com/engine/deprecated/ where you can find the target removal dates

## 18.04.0-ce (2018-04-DD)

### ---Delete candidates---
* Bump Runc to 1.0.0-rc5. [moby/moby#36449](https://github.com/moby/moby/pull/36449)
* Bump VERSION to 18.04.0-dev. [docker/cli#901](https://github.com/docker/cli/pull/901)
* Bump go-digest to v1.0.0-rc.1. [moby/moby#36704](https://github.com/moby/moby/pull/36704)
* Golint fix up. [moby/moby#36392](https://github.com/moby/moby/pull/36392)
* Improvement in integration tests. [moby/moby#36471](https://github.com/moby/moby/pull/36471)
* Migrate config inspect test to api test. [moby/moby#36430](https://github.com/moby/moby/pull/36430)
* Migrate docker rm tests to api tests. [moby/moby#36474](https://github.com/moby/moby/pull/36474)
* Migrate events tests to api tests. [moby/moby#36444](https://github.com/moby/moby/pull/36444)
* Migrate export tests to api tests. [moby/moby#36459](https://github.com/moby/moby/pull/36459)
* Migrate several docker rm tests to api tests. [moby/moby#36293](https://github.com/moby/moby/pull/36293)
* Migrate some config secret tests to api test. [moby/moby#36406](https://github.com/moby/moby/pull/36406)
* Migrate some container copy tests to integration. [moby/moby#36434](https://github.com/moby/moby/pull/36434)
* Migrate volumes tests in integration-cli to api tests. [moby/moby#36292](https://github.com/moby/moby/pull/36292)
* Integration/: make e2e run without failure. [moby/moby#36594](https://github.com/moby/moby/pull/36594)
* Integration/TestContainerShmNoLeak: use --iptables=false. [moby/moby#36567](https://github.com/moby/moby/pull/36567)
* Integration/TestExportContainerAfterDaemonRestart: add. [moby/moby#36606](https://github.com/moby/moby/pull/36606)
* Remove DockerTrustSuite to docker/cli e2e tests. [moby/moby#36515](https://github.com/moby/moby/pull/36515)
* Remove docker_cli_secret_inspect_test.go. [moby/moby#36445](https://github.com/moby/moby/pull/36445)
* Remove duplicate TestServiceUpdatePort. [moby/moby#36502](https://github.com/moby/moby/pull/36502)
* Remove filewatcher. [docker/cli#955](https://github.com/docker/cli/pull/955)
* Remove myself from CODEOWNERS. [moby/moby#36700](https://github.com/moby/moby/pull/36700)
* Remove testutil. [docker/cli#918](https://github.com/docker/cli/pull/918)
* Update e2e run script. [moby/moby#36391](https://github.com/moby/moby/pull/36391)
* Update gotestyourself dependency. [docker/cli#911](https://github.com/docker/cli/pull/911)
* Updates the Dockerfile to use multi-stage. [moby/moby#35100](https://github.com/moby/moby/pull/35100)
- Fix grammar typo in comment. [docker/cli#912](https://github.com/docker/cli/pull/912)
* Remove unnecessary diff tests. [moby/moby#36550](https://github.com/moby/moby/pull/36550)
* Replace testify assertions with gotestyourself/assert. [docker/cli#879](https://github.com/docker/cli/pull/879)
* Replace testify/assert with gotestyourself/assert. [moby/moby#36507](https://github.com/moby/moby/pull/36507)
* Use unique names for container/rename_test.go. [moby/moby#36692](https://github.com/moby/moby/pull/36692)
* Use unique names for test containers of container/nat integration tests. [moby/moby#36647](https://github.com/moby/moby/pull/36647)
* Use unique names for test resources of container/inspect, container/ps, container/stop tests. [moby/moby#36662](https://github.com/moby/moby/pull/36662)
- Fixes some integration/container tests to run on remote daemon. [moby/moby#36468](https://github.com/moby/moby/pull/36468)
* Pkg/mount unit tests: skip some test under non-root. [moby/moby#36505](https://github.com/moby/moby/pull/36505)
* Docs touch-ups for "autoremove" and broken anchor. [docker/cli#957](https://github.com/docker/cli/pull/957)
* [integration] skip ppc64le oom tests temporarily. [moby/moby#36539](https://github.com/moby/moby/pull/36539)
+ Add missing canonical import comment to files in integration tests. [moby/moby#36460](https://github.com/moby/moby/pull/36460)
* Refactor build tests to re-use more code and not require root. [docker/cli#931](https://github.com/docker/cli/pull/931)
* Integration-cli/TestSlowStdinClosing: increase timeout. [moby/moby#36571](https://github.com/moby/moby/pull/36571)
+ Add a build unit test for symlinked context. [docker/cli#925](https://github.com/docker/cli/pull/925)
+ Add appveyor setup to build and unit test. [docker/cli#905](https://github.com/docker/cli/pull/905)
* Clarify behaviour of restart policy in run ref doc. [docker/cli#962](https://github.com/docker/cli/pull/962)
* Don't prompt for github creds in unit test. [docker/cli#920](https://github.com/docker/cli/pull/920)
* Test for systemd cgroupdriver memory setting. [moby/moby#36172](https://github.com/moby/moby/pull/36172)
* TestLinksEtcHostsContentMatch: use container.Exec(). [moby/moby#36569](https://github.com/moby/moby/pull/36569)
* Testing: Use canonical asserts. [docker/cli#921](https://github.com/docker/cli/pull/921)
+ Add some tests to the volume store. [moby/moby#36584](https://github.com/moby/moby/pull/36584)
+ Address `expected` vs `actual` in integration tests. [moby/moby#36490](https://github.com/moby/moby/pull/36490)
+ Adds a unit test for plugin request timeout. [moby/moby#36493](https://github.com/moby/moby/pull/36493)
- Fix Dockerfile.e2e build. [moby/moby#36376](https://github.com/moby/moby/pull/36376) (Testing related)
* Bump moby to ae7016427f8cba4e4d8fcb979d6ba313ee2c0702. [docker/cli#946](https://github.com/docker/cli/pull/946) (All changes were already included)
* Clean up a temp dir created in container unit test. [moby/moby#36429](https://github.com/moby/moby/pull/36429)
* Update Notary vendor to 0.6.0 release. [docker/cli#914](https://github.com/docker/cli/pull/914)
* Update docker-py. [moby/moby#36384](https://github.com/moby/moby/pull/36384) (test related)
* Clean the teardown process of network test. [moby/moby#36387](https://github.com/moby/moby/pull/36387)
+ Add the missing call to setupTest to TestNetworkLoopbackNat test. [moby/moby#36633](https://github.com/moby/moby/pull/36633)
- Fix for Flaky test TestServiceWithPredefinedNetwork. [moby/moby#36551](https://github.com/moby/moby/pull/36551)
* Enhancement of replacing ContainerCreate with helper funcs in tests. [moby/moby#36450](https://github.com/moby/moby/pull/36450)
* Extract ImageService from Daemon. [moby/moby#36240](https://github.com/moby/moby/pull/36240) (Refactor)
* Image/spec: add historical information about v1 spec. [moby/moby#35149](https://github.com/moby/moby/pull/35149) (Docs update)
* Move containerIsStopped/containerIsInState to integration/internal/container. [moby/moby#36393](https://github.com/moby/moby/pull/36393) (refactor)
* Move daemon image code in preparation for ImageService. [moby/moby#36373](https://github.com/moby/moby/pull/36373)
* Pkg/mount: use sort.Slice. [moby/moby#36506](https://github.com/moby/moby/pull/36506)
* Remove unnecessary container.WithName in kill test. [moby/moby#36476](https://github.com/moby/moby/pull/36476)
* Small content trust enhancement. [docker/cli#945](https://github.com/docker/cli/pull/945)
* Unify arch-specific Dockerfiles into multi-arch one. [moby/moby#36546](https://github.com/moby/moby/pull/36546)
* Update curators list. [moby/moby#36694](https://github.com/moby/moby/pull/36694)
* Use new APIClient interface. [docker/cli#916](https://github.com/docker/cli/pull/916)
* Refactor content_trust cli/flags handling. [docker/cli#929](https://github.com/docker/cli/pull/929)
+ Add some content trust tests. [docker/cli#924](https://github.com/docker/cli/pull/924)
- Fix "expected" and "actual" being reversed. [moby/moby#36455](https://github.com/moby/moby/pull/36455)

### Builder

- Fix typos in builder and client. [moby/moby#36424](https://github.com/moby/moby/pull/36424)

### Client

* Print Stack API and Kubernetes versions in version command. [docker/cli#898](https://github.com/docker/cli/pull/898)
- Fix Kubernetes duplication in version command. [docker/cli#953](https://github.com/docker/cli/pull/953)
* Use HasAvailableFlags instead of HasFlags for Options in help. [docker/cli#959](https://github.com/docker/cli/pull/959)
+ Add support for mandatory variables to stack deploy. [docker/cli#893](https://github.com/docker/cli/pull/893)
- Fix docker stack services command Port output. [docker/cli#943](https://github.com/docker/cli/pull/943)
* Deprecate unencrypted storage. [docker/cli#561](https://github.com/docker/cli/pull/561)
* Don't set a default filename for ConfigFile. [docker/cli#917](https://github.com/docker/cli/pull/917)
- Fix compose network name. [docker/cli#941](https://github.com/docker/cli/pull/941)

### Logging

* Make LogFile perms configurable. [moby/moby#36523](https://github.com/moby/moby/pull/36523)
* Silent login: use credentials from cred store to login. [docker/cli#139](https://github.com/docker/cli/pull/139)
+ Add support for compressibility of log file. [moby/moby#29932](https://github.com/moby/moby/pull/29932)
- Fix empty LogPath with non-blocking logging mode. [moby/moby#36272](https://github.com/moby/moby/pull/36272)

### Networking

- Prevent explicit removal of ingress network. [moby/moby#36538](https://github.com/moby/moby/pull/36538)

### Runtime

* Devmapper cleanup improvements. [moby/moby#36307](https://github.com/moby/moby/pull/36307)
* Devmapper.Mounted: remove. [moby/moby#36437](https://github.com/moby/moby/pull/36437)
* Devmapper/Remove(): use Rmdir, ignore errors. [moby/moby#36438](https://github.com/moby/moby/pull/36438)
* LCOW - Change platform parser directive to FROM statement flag. [moby/moby#35089](https://github.com/moby/moby/pull/35089)
* Split daemon service code to windows file. [moby/moby#36653](https://github.com/moby/moby/pull/36653)
* Windows: Block pulling uplevel images. [moby/moby#36327](https://github.com/moby/moby/pull/36327)
* Windows: Hyper-V containers are broken after 36586 was merged. [moby/moby#36610](https://github.com/moby/moby/pull/36610)
* Windows: Move kernel_windows to use golang registry functions. [moby/moby#36617](https://github.com/moby/moby/pull/36617)
* Windows: Pass back system errors on container exit. [moby/moby#35967](https://github.com/moby/moby/pull/35967)
* Windows: Remove servicing mode. [moby/moby#36267](https://github.com/moby/moby/pull/36267)
* Windows: Report Version and UBR. [moby/moby#36451](https://github.com/moby/moby/pull/36451)
* Bump Runc to 1.0.0-rc5. [moby/moby#36449](https://github.com/moby/moby/pull/36449)
* Mount failure indicates the path that failed. [moby/moby#36407](https://github.com/moby/moby/pull/36407)
* Change return for errdefs.getImplementer(). [moby/moby#36489](https://github.com/moby/moby/pull/36489)
* Client: fix hijackedconn reading from buffer. [moby/moby#36663](https://github.com/moby/moby/pull/36663)
* Content encoding negotiation added to archive request. [moby/moby#36164](https://github.com/moby/moby/pull/36164)
* Daemon/stats: more resilient cpu sampling. [moby/moby#36519](https://github.com/moby/moby/pull/36519)
* Daemon/stats: remove obnoxious types file. [moby/moby#36494](https://github.com/moby/moby/pull/36494)
* Daemon: use context error rather than inventing new one. [moby/moby#36670](https://github.com/moby/moby/pull/36670)
* Enable CRIU on non-amd64 architectures (v2). [moby/moby#36676](https://github.com/moby/moby/pull/36676)
- Fixes intermittent client hang after closing stdin to attached container [moby/moby#36517](https://github.com/moby/moby/pull/36517)
- Fix daemon panic on container export after restart [moby/moby#36586](https://github.com/moby/moby/pull/36586)
- Follow-up fixes on multi-stage moby's Dockerfile. [moby/moby#36425](https://github.com/moby/moby/pull/36425)
* Freeze busybox and latest glibc in Docker image. [moby/moby#36375](https://github.com/moby/moby/pull/36375)
* If container will run as non root user, drop permitted, effective caps early. [moby/moby#36587](https://github.com/moby/moby/pull/36587)
* Layer: remove metadata store interface. [moby/moby#36504](https://github.com/moby/moby/pull/36504)
* Minor optimizations to dockerd. [moby/moby#36577](https://github.com/moby/moby/pull/36577)
* Whitelist statx syscall. [moby/moby#36417](https://github.com/moby/moby/pull/36417)
+ Add missing error return for plugin creation. [moby/moby#36646](https://github.com/moby/moby/pull/36646)
- Fix AppArmor not being applied to Exec processes. [moby/moby#36466](https://github.com/moby/moby/pull/36466)
* Daemon/logger/ring.go: log error not instance. [moby/moby#36475](https://github.com/moby/moby/pull/36475)
- Fix stats collector spinning CPU if no stats are collected. [moby/moby#36609](https://github.com/moby/moby/pull/36609)
- Fix(distribution): digest cache should not be moved if it was an auth. [moby/moby#36509](https://github.com/moby/moby/pull/36509)

### Swarm Mode

* Fixes for synchronizing the dispatcher shutdown with in-progress rpcs. [moby/moby#36371](https://github.com/moby/moby/pull/36371)
* Increase raft ElectionTick to 10xHeartbeatTick. [moby/moby#36672](https://github.com/moby/moby/pull/36672)
