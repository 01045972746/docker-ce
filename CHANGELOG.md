# Changelog 
For more information on the list of deprecated flags and APIs, have a look at
https://docs.docker.com/engine/deprecated/ where you can find the target removal dates

## 18.06-ce (2018-07-DD)

### ---Triage---

* 908 - Adding configs/secrets to service inspect pretty. [docker/cli#1006](https://github.com/docker/cli/pull/1006)
* Allow `x-*` extension on 3rd level objects. [docker/cli#1097](https://github.com/docker/cli/pull/1097)
* Allow to add any args when doing a make run. [moby/moby#37190](https://github.com/moby/moby/pull/37190)
* Alternative failure mitigation of `TestExecInteractiveStdinClose`. [moby/moby#37143](https://github.com/moby/moby/pull/37143)
* Api: add MaskedPaths and ReadonlyPaths options. [moby/moby#36644](https://github.com/moby/moby/pull/36644)
* Be explicit about github.com prefix being a legacy feature. [moby/moby#37174](https://github.com/moby/moby/pull/37174)
* Better namespace experience with Kubernetes. [docker/cli#991](https://github.com/docker/cli/pull/991)
* Better user experience with Kubernetes namespaces for UCP. [docker/cli#1034](https://github.com/docker/cli/pull/1034)
* Bump Golang to 1.10.2. [docker/cli#1048](https://github.com/docker/cli/pull/1048)
* Bump Golang to 1.10.3. [docker/cli#1122](https://github.com/docker/cli/pull/1122)
* Bump continuity. [moby/moby#37133](https://github.com/moby/moby/pull/37133)
* Bump docker/distribution to 83389a148052d74ac602f5f1d62f86ff2f3c4aa5. [moby/moby#36906](https://github.com/moby/moby/pull/36906)
* Bump go version to 1.10.2. [moby/moby#36975](https://github.com/moby/moby/pull/36975)
* Bump moby version (and its dependencies). [docker/cli#1116](https://github.com/docker/cli/pull/1116)
* Bump tini to v0.18.0. [moby/moby#36946](https://github.com/moby/moby/pull/36946)
* Bump version to 18.06.0-dev. [docker/cli#1030](https://github.com/docker/cli/pull/1030)
* Change error message for unreadable files. [docker/cli#1053](https://github.com/docker/cli/pull/1053)
* Check allNamespace config value while loading configuration file. [docker/cli#1087](https://github.com/docker/cli/pull/1087)
* Check errors when initializing the docker client in the help command. [docker/cli#1119](https://github.com/docker/cli/pull/1119)
* Clean up in TestNegotiateAPIVersionEmpty. [moby/moby#37236](https://github.com/moby/moby/pull/37236)
* Close readclosers returned by DecompressStream. [moby/moby#34218](https://github.com/moby/moby/pull/34218)
* Construct and add 'LABEL' command from 'label' option to last stage. [moby/moby#37011](https://github.com/moby/moby/pull/37011)
* Container links integration tests use unique names. [moby/moby#37215](https://github.com/moby/moby/pull/37215)
* Create standalone e2e test image. [docker/cli#1064](https://github.com/docker/cli/pull/1064)
* Daemon.ContainerStop(): fix for a negative timeout. [moby/moby#36874](https://github.com/moby/moby/pull/36874)
* Daemon.setMounts(): copy slice in place. [moby/moby#36991](https://github.com/moby/moby/pull/36991)
* Describe IP field of Port definition. [moby/moby#36971](https://github.com/moby/moby/pull/36971)
* Dockerfile*: bump Go to 1.10.3. [moby/moby#37259](https://github.com/moby/moby/pull/37259)
* Export Push and Save. [docker/cli#1123](https://github.com/docker/cli/pull/1123)
* Export pull as a public function. [docker/cli#1026](https://github.com/docker/cli/pull/1026)
* Extend client API with custom HTTP requests. [moby/moby#37071](https://github.com/moby/moby/pull/37071)
* Extract volume interaction to a volumes service. [moby/moby#36688](https://github.com/moby/moby/pull/36688)
* Image spec v1 formatting fix. [moby/moby#37051](https://github.com/moby/moby/pull/37051)
* Improve GetTimestamp parsing. [moby/moby#35402](https://github.com/moby/moby/pull/35402)
* Jsonmessage: pass message to aux callback. [moby/moby#37064](https://github.com/moby/moby/pull/37064)
* Just satisfying my OCD - fixed comment spacing. [moby/moby#37331](https://github.com/moby/moby/pull/37331)
* Kubernetes orchestrator all namespaces. [docker/cli#1059](https://github.com/docker/cli/pull/1059)
* Make an error for an invalid orchestrator. [docker/cli#1055](https://github.com/docker/cli/pull/1055)
* Make integration tests less noisy. [moby/moby#37090](https://github.com/moby/moby/pull/37090)
* Manifest list: request specific permissions. [docker/cli#1024](https://github.com/docker/cli/pull/1024)
* Mark @thajeztah as a MAINTAINER…. [docker/cli#1115](https://github.com/docker/cli/pull/1115)
* Mark @thajeztah as a MAINTAINER…. [moby/moby#37232](https://github.com/moby/moby/pull/37232)
* Minor fix: "stdin" instead of "stding". [docker/cli#1066](https://github.com/docker/cli/pull/1066)
* More fixes on integration. [moby/moby#37105](https://github.com/moby/moby/pull/37105)
* Move inspect test from moby to cli. [docker/cli#1072](https://github.com/docker/cli/pull/1072)
* Move plugin client creation to the extension point. [moby/moby#37017](https://github.com/moby/moby/pull/37017)
* Move plugin client to separate interface. [moby/moby#37177](https://github.com/moby/moby/pull/37177)
* Optimize ContainerTop() aka docker top. [moby/moby#37131](https://github.com/moby/moby/pull/37131)
* Orchestrator column. [docker/cli#973](https://github.com/docker/cli/pull/973)
* Overlay2: remove unused cdMountFrom() helper function. [moby/moby#37041](https://github.com/moby/moby/pull/37041)
* Overlay: do not ignore invalid storage-driver options. [moby/moby#37040](https://github.com/moby/moby/pull/37040)
* Pkg/mount/TestMount: fix wrt selinux. [moby/moby#36750](https://github.com/moby/moby/pull/36750)
* Refactor and cleanup the intermediate container creation. [moby/moby#37189](https://github.com/moby/moby/pull/37189)
* Refactor: simplify code to make function getExecConfig  more readable. [moby/moby#36815](https://github.com/moby/moby/pull/36815)
* Remove Kubernetes commands from experimental. [docker/cli#1068](https://github.com/docker/cli/pull/1068)
* Remove references to old release process. [moby/moby#37104](https://github.com/moby/moby/pull/37104)
* Remove some unused contrib items. [moby/moby#36977](https://github.com/moby/moby/pull/36977)
* Replace 'precpu' with 'percpu' in API docs.. [moby/moby#35410](https://github.com/moby/moby/pull/35410)
* Replace deprecated testutil.ErrorContains(). [moby/moby#37110](https://github.com/moby/moby/pull/37110)
* Restartmanager: do not apply restart policy on created containers. [moby/moby#36924](https://github.com/moby/moby/pull/36924)
* Rewrote data-root escape error message. [moby/moby#37101](https://github.com/moby/moby/pull/37101)
* Set item-type for ExecIDs. [moby/moby#37121](https://github.com/moby/moby/pull/37121)
* Skip feature/test added which is breaking ee. [moby/moby#37130](https://github.com/moby/moby/pull/37130)
* Skip some test on remote daemon for e2e run(s). [moby/moby#36944](https://github.com/moby/moby/pull/36944)
* Some slight tweaks for the integration test. [moby/moby#37086](https://github.com/moby/moby/pull/37086)
* Switch from x/net/context to context. [docker/cli#1038](https://github.com/docker/cli/pull/1038)
* TestContainerAPITop: fix flakyness. [moby/moby#37119](https://github.com/moby/moby/pull/37119)
* TestPostContainersAttach: minor improvements. [moby/moby#36612](https://github.com/moby/moby/pull/36612)
* Update API version to v1 38. [moby/moby#37141](https://github.com/moby/moby/pull/37141)
* Update comments about `InitRouter`. [moby/moby#37347](https://github.com/moby/moby/pull/37347)
* Update containerd to 1.1. [moby/moby#36895](https://github.com/moby/moby/pull/36895)
* Update document links of help and comments to make it up-to-date. [docker/cli#1070](https://github.com/docker/cli/pull/1070)
* Update gotestyourself to gotest.tools. [docker/cli#1121](https://github.com/docker/cli/pull/1121)
* Update gotestyourself to gotest.tools. [moby/moby#37243](https://github.com/moby/moby/pull/37243)
* Update hcsshim to v0.6.10. [moby/moby#36985](https://github.com/moby/moby/pull/36985)
* Update miekg/dns to v1.0.7. [moby/moby#37192](https://github.com/moby/moby/pull/37192)
* Update overlay2 to use naive diff for changes. [moby/moby#37313](https://github.com/moby/moby/pull/37313)
* Update some document links of help markdown files. [docker/cli#1063](https://github.com/docker/cli/pull/1063)
* Update to containerd v1.1.1-rc.1. [moby/moby#37312](https://github.com/moby/moby/pull/37312)
* Update vndr commit to latest. [docker/cli#1080](https://github.com/docker/cli/pull/1080)
* Upgrade imdario/mergo to v0.3.5. [moby/moby#37239](https://github.com/moby/moby/pull/37239)
* Use : instead of = in mounts service pretty inspect. [docker/cli#1037](https://github.com/docker/cli/pull/1037)
* Use command.Cli interface instead of concrete type…. [docker/cli#1124](https://github.com/docker/cli/pull/1124)
* Use filepath.Base instead of path.Base. [docker/cli#1039](https://github.com/docker/cli/pull/1039)
* Use go-systemd const instead of magic string in Linux version of dockerd. [moby/moby#37136](https://github.com/moby/moby/pull/37136)
* Use stdlib TLS dialer. [moby/moby#36687](https://github.com/moby/moby/pull/36687)
* Use unique names for resources in create service integration tests. [moby/moby#37231](https://github.com/moby/moby/pull/37231)
* Use unique names for resources in integration tests of secret package. [moby/moby#37191](https://github.com/moby/moby/pull/37191)
* Various code-cleanup. [moby/moby#37108](https://github.com/moby/moby/pull/37108)
* Vendor: update containerd to 63522d9. [moby/moby#37250](https://github.com/moby/moby/pull/37250)
* Warn when reserved-namespace engine labels are configured. [moby/moby#36921](https://github.com/moby/moby/pull/36921)
* Warn when using host-ip for published ports. [docker/cli#1017](https://github.com/docker/cli/pull/1017)
* When link id is empty for overlay2, do not remove this link.. [moby/moby#36161](https://github.com/moby/moby/pull/36161)
* [K8s] Do env-variable expansion on the uninterpreted Config files. [docker/cli#974](https://github.com/docker/cli/pull/974)
* [vim] Be case insensitive for D in dockerfile. [moby/moby#37235](https://github.com/moby/moby/pull/37235)
+ Add --init option to `docker service create`. [docker/cli#479](https://github.com/docker/cli/pull/479)
+ Add String method so quieted output displays properly. [docker/cli#1090](https://github.com/docker/cli/pull/1090)
+ Add `init` support in 3.7 schema. [docker/cli#1129](https://github.com/docker/cli/pull/1129)
+ Add `t.Name()` to tests so that service names are unique. [moby/moby#37166](https://github.com/moby/moby/pull/37166)
+ Add additional message when backendfs is extfs without d_type support. [moby/moby#37022](https://github.com/moby/moby/pull/37022)
+ Add api version checking for tests from new feature. [moby/moby#37169](https://github.com/moby/moby/pull/37169)
+ Add env variable option for experimental. [docker/cli#1138](https://github.com/docker/cli/pull/1138)
+ Add exec_die to the list of known container events. [docker/cli#1028](https://github.com/docker/cli/pull/1028)
+ Add image metrics for push and pull. [moby/moby#37233](https://github.com/moby/moby/pull/37233)
+ Add integration test guidelines. [moby/moby#37249](https://github.com/moby/moby/pull/37249)
+ Add more example to the full-example tests. [docker/cli#1104](https://github.com/docker/cli/pull/1104)
+ Add support for `init` on services. [moby/moby#37183](https://github.com/moby/moby/pull/37183)
+ Add test for version output aligning. [docker/cli#1096](https://github.com/docker/cli/pull/1096)
+ Add verification to check if escapeKeys have elements (pkg/term/proxy.go). [moby/moby#36918](https://github.com/moby/moby/pull/36918)
+ Add warnings client side before deployment on Kubernetes. [docker/cli#903](https://github.com/docker/cli/pull/903)
+ Added description about pids count.. [docker/cli#1045](https://github.com/docker/cli/pull/1045)
- Fix TestDaemonNoSpaceLeftOnDeviceError. [moby/moby#37315](https://github.com/moby/moby/pull/37315)
- Fix a failed test. [moby/moby#37194](https://github.com/moby/moby/pull/37194)
- Fix a small spacing issue. [moby/moby#37337](https://github.com/moby/moby/pull/37337)
- Fix compilation on 32bit machines. [moby/moby#37292](https://github.com/moby/moby/pull/37292)
- Fix component information alignment. [docker/cli#1065](https://github.com/docker/cli/pull/1065)
- Fix cpu/memory limits and reservations being reset on service update. [docker/cli#1079](https://github.com/docker/cli/pull/1079)
- Fix daemon panic on restart when a plugin is running. [moby/moby#37234](https://github.com/moby/moby/pull/37234)
- Fix daemon.getSourceMount() for /. [moby/moby#37031](https://github.com/moby/moby/pull/37031)
- Fix docker trust signer removal. [docker/cli#1112](https://github.com/docker/cli/pull/1112)
- Fix e2e/system tests. [docker/cli#1076](https://github.com/docker/cli/pull/1076)
- Fix error message from docker inspect. [docker/cli#1071](https://github.com/docker/cli/pull/1071)
- Fix fd leak on attach. [moby/moby#37184](https://github.com/moby/moby/pull/37184)
- Fix flaky test TestServiceGet. [moby/moby#37304](https://github.com/moby/moby/pull/37304)
- Fix flaky test case of `TestExecInteractiveStdinClose`. [moby/moby#37076](https://github.com/moby/moby/pull/37076)
- Fix fluentd partial detection. [moby/moby#37029](https://github.com/moby/moby/pull/37029)
- Fix incorrect link in version-history.md. [moby/moby#37049](https://github.com/moby/moby/pull/37049)
- Fix integration tests and integration cli to run on older versions. [moby/moby#37003](https://github.com/moby/moby/pull/37003)
- Fix issue #850, Warn user of filter when pruning. [docker/cli#1043](https://github.com/docker/cli/pull/1043)
- Fix link anchors in CONTRIBUTING.md. [moby/moby#37276](https://github.com/moby/moby/pull/37276)
- Fix link to Docker Toolbox. [moby/moby#37240](https://github.com/moby/moby/pull/37240)
- Fix mis-used skip condition. [moby/moby#37179](https://github.com/moby/moby/pull/37179)
- Fix missing plugin name in message. [moby/moby#37052](https://github.com/moby/moby/pull/37052)
- Fix panics when --compress and --stream are used together. [docker/cli#1105](https://github.com/docker/cli/pull/1105)
- Fix race condition between exec start and resize.. [moby/moby#37172](https://github.com/moby/moby/pull/37172)
- Fix service filtering by name on Kubernetes. [docker/cli#1101](https://github.com/docker/cli/pull/1101)
- Fix service rollback options being cross-wired. [docker/cli#1052](https://github.com/docker/cli/pull/1052)
- Fix service update --host-rm not being granular enough. [docker/cli#1054](https://github.com/docker/cli/pull/1054)
- Fix some linting issues. [moby/moby#37091](https://github.com/moby/moby/pull/37091)
- Fix swagger file type for ExecIds. [moby/moby#36962](https://github.com/moby/moby/pull/36962)
- Fix swagger volume type generation. [moby/moby#37060](https://github.com/moby/moby/pull/37060)
- Fix typos: remove duplicated "the". [moby/moby#37088](https://github.com/moby/moby/pull/37088)
- Fix wrong assertion in volume/service package. [moby/moby#37211](https://github.com/moby/moby/pull/37211)
- Fixed output leak from TestRunCommandWithContentTrustErrors. [docker/cli#1141](https://github.com/docker/cli/pull/1141)

### Builder

* Builder: fix layer leak on multi-stage wildcard copy. [moby/moby#37178](https://github.com/moby/moby/pull/37178)
* Builder: fix processing of invalid substitusion syntax. [moby/moby#37134](https://github.com/moby/moby/pull/37134)
* Dockerbuilder: use the arch info from base image. [moby/moby#36816](https://github.com/moby/moby/pull/36816)
* Don't fail to start daemon if builder source is not available. [moby/moby#37280](https://github.com/moby/moby/pull/37280)
* Experimental BuildKit support. [moby/moby#37151](https://github.com/moby/moby/pull/37151)
* Export BuildArgs type from dockerfile package. [moby/moby#37016](https://github.com/moby/moby/pull/37016)
* Support for experimental BuildKit. [docker/cli#1111](https://github.com/docker/cli/pull/1111)
* Update Attach, Build, Commit, Cp, Create subcommand fish completions. [docker/cli#1005](https://github.com/docker/cli/pull/1005)
* Vendor: dockerfile parser from buildkit. [moby/moby#37197](https://github.com/moby/moby/pull/37197)
- Fix build on OpenBSD by defining Self(). [moby/moby#37301](https://github.com/moby/moby/pull/37301)
- Fix the target name issue for multi-stage build. [moby/moby#36960](https://github.com/moby/moby/pull/36960)

### Client

* Bump spf13/cobra to v0.0.3, pflag to v1.0.1. [moby/moby#37106](https://github.com/moby/moby/pull/37106)
* Handle multiple stack api versions. [docker/cli#899](https://github.com/docker/cli/pull/899)
* K8s: more robust stack error detection on deploy. [docker/cli#948](https://github.com/docker/cli/pull/948)
* Minor refactor in stack helper functions. [docker/cli#1084](https://github.com/docker/cli/pull/1084)
* Refactor `stack` command/package. [docker/cli#1147](https://github.com/docker/cli/pull/1147)
* Support for rollback config in compose 3.7. [docker/cli#409](https://github.com/docker/cli/pull/409)
* Update Cobra and pflag, and use built-in --version feature. [docker/cli#1069](https://github.com/docker/cli/pull/1069)
* Validate stack-names for empty values. [docker/cli#1088](https://github.com/docker/cli/pull/1088)
* Warn if DOCKER_ORCHESTRATOR is still used but not DOCKER_STACK_ORCHESTRATOR. [docker/cli#1139](https://github.com/docker/cli/pull/1139)
* [Kubernetes] stack services filters. [docker/cli#1023](https://github.com/docker/cli/pull/1023)
+ Add a "top-level" annotation to hide persistent flags. [docker/cli#1106](https://github.com/docker/cli/pull/1106)
+ Add an `Extras` field on the compose config types.. [docker/cli#1126](https://github.com/docker/cli/pull/1126)
+ Add options to the compose loader. [docker/cli#1128](https://github.com/docker/cli/pull/1128)
- Fix always listing nodes in docker stack ps command. [docker/cli#1093](https://github.com/docker/cli/pull/1093)

### Deprecation

* Document reserved namespaces deprecation. [docker/cli#1040](https://github.com/docker/cli/pull/1040)

### Logging

* Allow awslogs to use non-blocking mode. [moby/moby#36522](https://github.com/moby/moby/pull/36522)
* Fluentd Log Driver: Add partial flag into record. [moby/moby#36159](https://github.com/moby/moby/pull/36159)
* Re-order CHANGELOG.md to pass `make validate` test. [moby/moby#37047](https://github.com/moby/moby/pull/37047)
* Update Events, Exec, Export, History, Images, Import, Inspect, Load, and Login subcommand fish completions. [docker/cli#1061](https://github.com/docker/cli/pull/1061)
* Update documentation for RingLogger's ring buffer. [moby/moby#37084](https://github.com/moby/moby/pull/37084)
* [backport] Add 17.03.2 CHANGELOG. [moby/moby#36289](https://github.com/moby/moby/pull/36289)
+ Add metrics for log failures/partials. [moby/moby#37034](https://github.com/moby/moby/pull/37034)
- Fix logging plugin crash unrecoverable. [moby/moby#37028](https://github.com/moby/moby/pull/37028)
- Fix logging test type. [moby/moby#37070](https://github.com/moby/moby/pull/37070)
- Fix race conditions in logs API. [moby/moby#37062](https://github.com/moby/moby/pull/37062)
- Fix some issues in logfile reader and rotation. [moby/moby#37063](https://github.com/moby/moby/pull/37063)

### Networking

* Allow user to specify default address pools for docker networks. [docker/cli#818](https://github.com/docker/cli/pull/818)
* Allow user to specify default address pools for docker networks. [moby/moby#36396](https://github.com/moby/moby/pull/36396)
* Avoid unique name usage in TestDockerNetworkConnectAlias. [moby/moby#37044](https://github.com/moby/moby/pull/37044)
* Bump libnetwork to 19279f0492417475b6bfbd0aa529f73e8f178fb5. [moby/moby#37252](https://github.com/moby/moby/pull/37252)
* Bump libnetwork to 3931ba4d815e385ab97093c64477b82f14dadefb. [moby/moby#37209](https://github.com/moby/moby/pull/37209)
* Bump libnetwork to eb6b2a57955e5c149d47c3973573216e8f8baa09. [moby/moby#37111](https://github.com/moby/moby/pull/37111)
* Create service integration tests use network package. [moby/moby#37279](https://github.com/moby/moby/pull/37279)
* Integration/service/network integration tests to use network package. [moby/moby#37298](https://github.com/moby/moby/pull/37298)
* Migrate TestAPINetworkCreateDelete from integration-cli/ to integration/. [moby/moby#37293](https://github.com/moby/moby/pull/37293)
* Output network attachment task information. [moby/moby#35246](https://github.com/moby/moby/pull/35246)
* Refactor delete network integration tests to use network package. [moby/moby#37255](https://github.com/moby/moby/pull/37255)
* Refactor ipvlan network integration tests to use network package. [moby/moby#37244](https://github.com/moby/moby/pull/37244)
* Refactor macvlan network integration tests to use network.Create. [moby/moby#37195](https://github.com/moby/moby/pull/37195)
* Refactor network inspect integration tests to use network package. [moby/moby#37264](https://github.com/moby/moby/pull/37264)
* Refactored remaining macvlan integration tests to use network package. [moby/moby#37285](https://github.com/moby/moby/pull/37285)
* Refactored service network integration tests to use the network package. [moby/moby#37270](https://github.com/moby/moby/pull/37270)
* Some container/network cleanups. [moby/moby#37033](https://github.com/moby/moby/pull/37033)
* Use unique names in integration/network/service_test.go. [moby/moby#37351](https://github.com/moby/moby/pull/37351)

### Runtime

* Aufs: log why aufs is not supported. [moby/moby#36995](https://github.com/moby/moby/pull/36995)
* Hide experimental checkpoint features on Windows. [docker/cli#1094](https://github.com/docker/cli/pull/1094)
* Lcow: Allow the client to adjust capabilities and device cgroup rules. [moby/moby#37294](https://github.com/moby/moby/pull/37294)
* Updated path to be consistent w/ current Windows build process. [moby/moby#37295](https://github.com/moby/moby/pull/37295)
+ Add windows recycle bin test and update hcsshim to v0.6.11. [moby/moby#36994](https://github.com/moby/moby/pull/36994)

### Swarm Mode

* Better stack list experience with Kubernetes and Swarm. [docker/cli#1031](https://github.com/docker/cli/pull/1031)
* Bump SwarmKit to remove deprecated grpc metadata wrappers. [moby/moby#36905](https://github.com/moby/moby/pull/36905)
* Bump swarmkit to bd69f6e8e301645afd344913fa1ede53a0a111fb. [moby/moby#36979](https://github.com/moby/moby/pull/36979)
* For docker stack ls make an error if Swarm and Kubernetes hosts do not match. [docker/cli#1035](https://github.com/docker/cli/pull/1035)
* Refactor service create integration tests to use swarm CreateService. [moby/moby#37030](https://github.com/moby/moby/pull/37030)
* Refactored network integration tests to make use of swarm.CreateService. [moby/moby#36803](https://github.com/moby/moby/pull/36803)
- Fix broken swarm commands with Kubernetes defined as orchestrator. [docker/cli#1137](https://github.com/docker/cli/pull/1137)
- Fixing network inspect for swarm. [moby/moby#37045](https://github.com/moby/moby/pull/37045)
